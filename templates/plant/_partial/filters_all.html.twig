<div class="filters" id="form_filter">
    <form class="filters_form" action="{{ path('plant_index') }}">
        <div class="grid-6">
            <div class="col-6 fblock f_all">
                <input type="text" name="q" placeholder="recherche ..." value="{{ query_string }}"/><br>
            </div>
            <div class="col-2-small-3 fblock f_all">
                <h4>Tolérance au calcaire</h4>
                <ul class="unstyled">
                    {% for limestone in [1,2,4] %}
                        <li><label for="filter_insolation_{{ limestone }}">
                                <input id="filter_insolation_{{ limestone }}" name="limestone[]" type="checkbox" value="{{ limestone }}" data-f-value="{{ limestone }}" {% if ( filters['limestone'] is defined and (limestone in filters['limestone'])) %} checked="checked" {% endif %} >
                                {{ limestone | human('limestone') }}
                            </label></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-2-small-3 fblock f_all f_my_climat">
                <h4>Rusticité</h4>
                <input type="range" id="rusticity_v" name="rusticity_v" min="-40" max="5" class="f_not_used" disabled="disabled" value="{% if ( filters['rusticity'] is defined ) %}{{filters['rusticity']}}{% endif %}">
                <br>
                <label for="rusticity" class="label">Rusticité <span></span>°C</label><br>
                <input id="rusticity" name="rusticity" type="checkbox" value="" data-f-value="" {% if ( filters['rusticity'] is defined ) %}checked="checked"{% endif %} class="switch" />
                <script>
                    document.getElementById('rusticity_v').addEventListener('change',function (){
                       document.getElementById('rusticity').value = this.value;
                       document.getElementById('rusticity').setAttribute('data-f-value',this.value);
                       document.querySelector('[for="rusticity"] span').innerHTML = this.value;
                    });
                    document.getElementById('rusticity').addEventListener('click',function (){
                        console.log(this);
                        if (this.checked)
                            document.getElementById('rusticity_v').removeAttribute("disabled");
                        else
                            document.getElementById('rusticity_v').setAttribute("disabled", "disabled");
                    });
                    document.getElementById('rusticity_v').dispatchEvent(new Event('change'));
                </script>
            </div>
            <div class="col-2-small-3 fblock f_all f_my_climat">
                <h4>Exposition</h4>
                <ul class="unstyled">
                {% for insolation in insolations %}
                    <li><label for="filter_insolation_{{ insolation.id }}">
                        <input id="filter_insolation_{{ insolation.id }}" name="insolation[]" type="checkbox" value="{{ insolation.id }}" data-f-value="{{ insolation.type }}" {% if ( complex_filters['insolation'] is defined and (insolation.type in complex_filters['insolation'])) %} checked="checked" {% endif %} >
                        {{ insolation.type | human('insolation') }}
                    </label></li>
                {% endfor %}
                </ul>
            </div>
            <div class="col-2-small-3 fblock f_all f_my_climat">
                <h4>Tolérance à la sécheresse</h4>
                <select name="drought_tolerance[]" id="filter_drought_tolerance" multiple="multiple">
                    {% for drought_tolerance in 1..5 %}
                        <option value="{{ drought_tolerance }}" data-f-value="{{ drought_tolerance }}" {% if ( filters['drought_tolerance'] is defined and (drought_tolerance in filters['drought_tolerance'])) %} selected="selected" {% endif %} >
                            {{ drought_tolerance }}/5
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2-small-3 fblock f_all f_soil">
                {% if attributes['humus'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['humus'] } %}
                {% endif %}
            </div>
            <div class="col-2-small-3 fblock f_all f_soil">
                {% if attributes['sol'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['sol'] } %}
                {% endif %}
            </div>
            <div class="col-2-small-3 fblock f_all f_soil">
                {% if attributes['ph'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['ph'] } %}
                {% endif %}
            </div>
            <div class="col fblock f_all f_calendar">
                {% if attributes['flowering'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['flowering'] } %}
                {% endif %}
            </div>
            <div class="col fblock f_all f_calendar">
                {% if attributes['interet_mellifere'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['interet_mellifere'] } %}
                {% endif %}
                {% if attributes['interet_nectarifere'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['interet_nectarifere'] } %}
                {% endif %}
                {% if attributes['interet_pollen'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['interet_pollen'] } %}
                {% endif %}
            </div>
            <div class="col fblock f_all f_calendar">
                {% if attributes['fruit_comestible'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['fruit_comestible'] } %}
                {% endif %}
            </div>
            <div class="col fblock f_all f_calendar">
                {% if attributes['crop'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['crop'] } %}
                {% endif %}
            </div>
            <div class="col fblock f_all f_calendar">
                <h4>Strate</h4>
                <select name="stratum[]" id="filter_stratum" multiple="multiple">
                    {% for stratum in 1..6 %}
                        <option value="{{ stratum }}" data-f-value="{{ stratum }}" {% if ( filters['stratum'] is defined and (stratum in filters['stratum'])) %} selected="selected" {% endif %} >
                            {{ stratum | human('stratum') }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col fblock f_all">
                <h4>Tendance racinaire</h4>
                <select name="root[]" id="filter_root" multiple="multiple">
                    {% for root in 1..6 %}
                        <option value="{{ root }}" data-f-value="{{ root }}" {% if ( filters['root'] is defined and (root in filters['root'])) %} selected="selected" {% endif %} >
                            {{ root | human('root') }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col fblock f_all">
                <h4>Cycle de vie</h4>
                <select name="life_cycle[]" id="filter_life_cycle" multiple="multiple">
                    {% for life_cycle in 1..3 %}
                        <option value="{{ life_cycle }}" data-f-value="{{ life_cycle }}" {% if ( filters['life_cycle'] is defined and (life_cycle in filters['life_cycle'])) %} selected="selected" {% endif %} >
                            {{ life_cycle | human('life_cycle') }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2-small-3 fblock f_all f_micro_climat">
                {% if attributes['brise_vent'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['brise_vent'] } %}
                {% endif %}
            </div>
            <div class="col-2-small-3 fblock f_all f_haie">
                {% if attributes['interet_haie'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['interet_haie'] } %}
                {% endif %}
            </div>
            <div class="col-2-small-3 fblock f_all f_haie">
                {% if attributes['comestible'] is defined %}
                    {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attributes['comestible'] } %}
                {% endif %}
            </div>
            <div class="col-2-small-3 fblock f_all f_micro_climat">
                <h4>Densité de feuillage</h4>
                <select name="leaf_density[]" id="filter_leaf_density" multiple="multiple">
                    {% for leaf_density in 1..3 %}
                        <option value="{{ leaf_density }}" data-f-value="{{ leaf_density }}" {% if ( filters['leaf_density'] is defined and (leaf_density in filters['leaf_density'])) %} selected="selected" {% endif %} >
                            {{ leaf_density | human('leaf_density') }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2-small-3 fblock f_all f_micro_climat">
                <h4>Type de feuillage</h4>
                <select name="foliage[]" id="filter_foliage" multiple="multiple">
                    {% for foliage in 1..3 %}
                        <option value="{{ foliage }}" data-f-value="{{ foliage }}" {% if ( filters['foliage'] is defined and (foliage in filters['foliage'])) %} selected="selected" {% endif %} >
                            {{ foliage | human('foliage') }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            {% set excluded = ['interet_nectarifere','interet_pollen','fruit_comestible','interet_haie','comestible','sol'] %}
            {% for code,attribute in attributes %}
                {% if code not in excluded and not attribute.typeUnique %}
            <div class="col-2-small-3 fblock f_all">
                        {% include "plant/_partial/attribute_filter.html.twig" with {'attribute': attribute } %}
            </div>
                {% endif %}
            {% endfor %}
        </div>
        <input type="submit" value="OK" />
    </form>
</div>